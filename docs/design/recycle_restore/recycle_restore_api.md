# 回收站还原功能接口文档

## 1. 获取回收站文件列表

### 接口说明
- **路径**：`GET /api/recycle`
- **描述**：获取当前用户回收站中的所有文件和文件夹。

### 请求参数
- 无

### 返回参数
| 字段           | 类型     | 说明         |
| -------------- | -------- | ------------ |
| id             | string   | 文件/文件夹ID |
| name           | string   | 文件/文件夹名 |
| is_dir         | bool     | 是否为文件夹 |
| original_path  | string   | 原始路径     |
| deleted_at     | string   | 删除时间     |
| size           | int64    | 文件大小     |
| ...            | ...      | 其他字段     |

### 返回示例
```json
[
  {
    "id": "12345",
    "name": "test.docx",
    "is_dir": false,
    "original_path": "/docs/2024/",
    "deleted_at": "2024-06-01T12:00:00Z",
    "size": 102400
  }
]
```

---

## 2. 还原文件/文件夹

### 接口说明
- **路径**：`POST /api/recycle/restore`
- **描述**：将回收站中的文件/文件夹还原到原路径或指定新路径。

### 请求参数
| 字段        | 类型   | 必填 | 说明                 |
| ----------- | ------ | ---- | -------------------- |
| file_id     | string | 是   | 文件/文件夹ID        |
| target_path | string | 否   | 新还原路径（可选）   |

### 请求示例
```json
{
  "file_id": "12345",
  "target_path": "/docs/2024/"
}
```

### 返回参数
| 字段    | 类型   | 说明         |
| ------- | ------ | ------------ |
| message | string | 操作结果描述 |
| error   | string | 错误信息     |

### 返回示例
- 成功：
```json
{
  "message": "还原成功"
}
```
- 原路径不存在：
```json
{
  "error": "原路径不存在，请选择新的还原路径"
}
```
- 新路径无权限/非法/同名冲突：
```json
{
  "error": "目标路径无权限/非法/已存在同名文件"
}
```

---

## 3. 彻底删除

### 接口说明
- **路径**：`DELETE /api/recycle`
- **描述**：彻底删除回收站中的文件/文件夹。

### 请求参数
| 字段    | 类型   | 必填 | 说明           |
| ------- | ------ | ---- | -------------- |
| file_id | string | 是   | 文件/文件夹ID  |

### 请求示例
```json
{
  "file_id": "12345"
}
```

### 返回参数
| 字段    | 类型   | 说明         |
| ------- | ------ | ------------ |
| message | string | 操作结果描述 |
| error   | string | 错误信息     |

### 返回示例
- 成功：
```json
{
  "message": "彻底删除成功"
}
```
- 失败：
```json
{
  "error": "删除失败，文件不存在或无权限"
}
```

---

## 4. 错误码说明

| 错误码/信息                        | 说明                         |
| ----------------------------------- | ---------------------------- |
| 原路径不存在，请选择新的还原路径    | 还原时原路径已被删除         |
| 目标路径无权限/非法/已存在同名文件  | 新路径不可用                 |
| 删除失败，文件不存在或无权限        | 彻底删除时文件不存在或无权限 | 