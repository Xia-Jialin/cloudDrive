# 回收站还原功能前端原型与交互说明

## 1. 主要页面
- 回收站页面：展示所有被删除的文件/文件夹，支持分页、搜索、排序。
- 目录树选择弹窗：用于选择还原目标路径。

## 2. 交互流程

### 2.1 正常还原
1. 用户在回收站页面勾选文件/文件夹，点击"还原"按钮。
2. 前端调用`POST /api/recycle/restore`，不传`target_path`。
3. 后端检测原路径存在，返回成功。
4. 前端刷新回收站和主文件列表。

### 2.2 原路径不存在
1. 用户点击"还原"，前端调用接口，后端返回`{"error": "原路径不存在，请选择新的还原路径"}`。
2. 前端弹窗提示"原路径不存在，请选择新的还原路径"，并展示目录树。
3. 用户在目录树中选择目标路径，点击"确定"。
4. 前端携带`target_path`再次调用还原接口。
5. 还原成功后，刷新页面。

### 2.3 还原失败
- 若新路径无权限/非法/同名冲突，弹窗展示后端返回的具体错误信息，用户可重新选择。

## 3. 弹窗设计
- 标题：选择还原路径
- 内容：目录树组件，当前选中路径高亮
- 操作按钮：确定、取消
- 错误提示区：展示后端返回的错误

## 4. 批量操作
- 支持多选文件/文件夹批量还原
- 若部分文件原路径不存在，弹窗提示"部分文件需选择新路径"，可统一指定新路径
- 批量操作结果需明确反馈成功/失败项

## 5. 其他交互细节
- 还原后自动刷新回收站和主文件列表
- 彻底删除操作需二次确认弹窗
- 文件/文件夹图标区分显示
- 删除时间、原路径等信息在列表中展示

## 6. 异常处理
- 网络异常、接口超时等需有统一错误提示
- 权限不足、路径非法、同名冲突等需有明确提示

## 7. 交互原型建议
- 可参考主流云盘（如百度网盘、阿里云盘）回收站交互
- 目录树建议支持懒加载、搜索定位 